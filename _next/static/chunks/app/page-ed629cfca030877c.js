(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8010:function(e,t,s){Promise.resolve().then(s.bind(s,2196))},2196:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var r=s(7437),a=s(2265);function n(e){var t;let{building:s,isSelected:a,onClick:n}=e,l=(null===(t=s.address.split(",")[0])||void 0===t?void 0:t.trim())||s.address;return(0,r.jsx)("li",{className:"p-4 cursor-pointer hover:bg-gray-50 transition border-l-4 ".concat(a?"bg-red-50 border-l-rstu-red":"border-l-transparent"),onClick:n,children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-sm text-gray-900",children:l}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:s.address}),(0,r.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[s.units," units • ",s.owner]})]}),(0,r.jsx)("span",{className:"bg-blue-100 text-blue-900 px-2 py-1 rounded text-xs font-medium whitespace-nowrap ml-2",children:"Organizing"})]})})}function l(e){let{buildings:t,selectedBuilding:s,onSelectBuilding:l}=e,[i,o]=(0,a.useState)(""),c=(0,a.useMemo)(()=>{if(!i.trim())return t;let e=i.toLowerCase();return t.filter(t=>t.address.toLowerCase().includes(e)||t.owner.toLowerCase().includes(e))},[t,i]);return(0,r.jsxs)("div",{className:"w-2/5 border-r border-gray-200 flex flex-col bg-white",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search buildings...",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-rstu-red",value:i,onChange:e=>o(e.target.value)}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[c.length," building",1!==c.length?"s":""]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,r.jsx)("ul",{className:"divide-y divide-gray-200",children:c.map(e=>(0,r.jsx)(n,{building:e,isSelected:s.apn===e.apn,onClick:()=>l(e)},e.apn))}),0===c.length&&(0,r.jsx)("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No buildings match your search."})]})]})}var i=s(5040);let o=null;function c(e){let{messages:t,isConnected:s,currentUsername:n,onDeleteMessage:l}=e,i=(0,a.useRef)(null);(0,a.useEffect)(()=>{var e;null===(e=i.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[t]);let o=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return(0,r.jsxs)("div",{className:"flex flex-col h-full overflow-y-auto bg-gray-50 p-4 space-y-3",children:[(0,r.jsx)("div",{className:"flex items-center justify-center py-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs ".concat(s?"text-green-600":"text-gray-400"),children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(s?"bg-green-500":"bg-gray-400")}),s?"Connected to server":"Connecting..."]})}),0===t.length?(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-400 text-sm text-center px-8",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium mb-1",children:"No messages yet"}),(0,r.jsx)("p",{className:"text-xs",children:"Start the conversation! Your messages are saved and synced in real-time."})]})}):t.map(e=>{let t=n&&e.username===n;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-3 hover:shadow-md transition-shadow group",children:[(0,r.jsxs)("div",{className:"flex items-baseline justify-between mb-1",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-900 text-sm",children:e.username}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-400",children:o(e.timestamp)}),t&&l&&(0,r.jsx)("button",{onClick:()=>l(e.id,e.username),className:"text-gray-400 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity text-xs px-1",title:"Delete message","aria-label":"Delete message",children:"✕"})]})]}),(0,r.jsx)("p",{className:"text-gray-700 text-sm whitespace-pre-wrap break-words",children:e.text})]},e.id)}),(0,r.jsx)("div",{ref:i})]})}function d(e){let{onSendMessage:t,isConnected:s}=e,[n,l]=(0,a.useState)(""),[i,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{{let e=localStorage.getItem("rstu_chat_username");e&&(o(e),x(!0))}},[]);let m=()=>{if(!c.trim()){alert("Please enter a name");return}let e=c.trim();o(e),x(!0),localStorage.setItem("rstu_chat_username",e)};return(0,r.jsx)("div",{className:"border-t border-gray-200 bg-white p-4",children:(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),n.trim()){if(!u){alert("Please confirm your name first");return}t(n,i),l("")}},className:"space-y-3",children:[!u&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"username",className:"block text-xs font-medium text-gray-700 mb-1",children:"Your Name (saved locally)"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{id:"username",type:"text",value:c,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),m())},placeholder:"Enter your name...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rstu-red focus:border-transparent text-sm",maxLength:30,autoFocus:!0}),(0,r.jsx)("button",{type:"button",onClick:m,className:"px-4 py-2 bg-rstu-red text-white rounded-lg hover:bg-red-700 font-medium text-sm transition-colors",children:"Set Name"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:'Press Enter or click "Set Name" to confirm'})]}),u&&(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[(0,r.jsxs)("span",{children:["Posting as: ",(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:i})]}),(0,r.jsx)("button",{type:"button",onClick:()=>{x(!1),d(i)},className:"text-rstu-red hover:underline",children:"Change name"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:n,onChange:e=>l(e.target.value),placeholder:s?"Type a message...":"Connecting...",disabled:!s||!u,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rstu-red focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed text-sm",maxLength:500}),(0,r.jsx)("button",{type:"submit",disabled:!s||!n.trim()||!u,className:"px-4 py-2 bg-rstu-red text-white rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-medium text-sm transition-colors",children:"Send"})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 text-right",children:[n.length,"/500"]})]})})}function u(e){let{chatSlug:t,buildingAddress:s}=e,{messages:n,sendMessage:l,deleteMessage:u,isConnected:x}=function(e){let[t,s]=(0,a.useState)([]),[r,n]=(0,a.useState)(!1),l=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let t=function(){if(!o){let e="http://localhost:8765";(o=(0,i.io)(e,{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:1/0,transports:["websocket","polling"]})).on("connect",()=>{console.log("[Socket.io] Connected to server:",e)}),o.on("disconnect",e=>{console.log("[Socket.io] Disconnected:",e)}),o.on("connect_error",e=>{console.error("[Socket.io] Connection error:",e)}),o.on("error",e=>{let{code:t,message:s}=e;console.error("[Socket.io] Server error [".concat(t,"]:"),s)})}return o}();if(!t){console.error("[useSocketChat] Failed to initialize Socket.io");return}l.current=t;let r=()=>{n(!0),t.emit("join_room",{room:e})},a=()=>{n(!1)},c=t=>{let{messages:r}=t;console.log("[useSocketChat] Loaded ".concat(r.length," messages for room: ").concat(e)),s(r)},d=e=>{let{message:t}=e;s(e=>e.some(e=>e.id===t.id)?e:[...e,t].sort((e,t)=>e.timestamp-t.timestamp))},u=e=>{let{messageId:t}=e;console.log("[useSocketChat] Message deleted: ".concat(t)),s(e=>e.filter(e=>e.id!==t))};return t.on("connect",r),t.on("disconnect",a),t.on("message_history",c),t.on("new_message",d),t.on("message_deleted",u),n(t.connected),t.connected&&t.emit("join_room",{room:e}),()=>{t.off("connect",r),t.off("disconnect",a),t.off("message_history",c),t.off("new_message",d),t.off("message_deleted",u),s([]),n(!1)}},[e]),{messages:t,sendMessage:(0,a.useCallback)((t,s)=>{if(!t.trim())return;let r=l.current;if(!r||!r.connected){console.error("[useSocketChat] Cannot send message: not connected");return}r.emit("send_message",{room:e,text:t.trim(),username:s||"Anonymous"})},[e]),deleteMessage:(0,a.useCallback)((t,s)=>{let r=l.current;if(!r||!r.connected){console.error("[useSocketChat] Cannot delete message: not connected");return}r.emit("delete_message",{room:e,messageId:t,username:s})},[e]),isConnected:r,clearMessages:(0,a.useCallback)(()=>{console.log("[useSocketChat] clearMessages called (no-op)")},[])}}(t),[m,g]=(0,a.useState)("");return(0,a.useEffect)(()=>{{let e=localStorage.getItem("rstu_chat_username");e&&g(e)}},[]),(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200 bg-white",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:s}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Real-time organizing chat • No login required • Unlimited message history"})]}),(0,r.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,r.jsx)(c,{messages:n,isConnected:x,currentUsername:m,onDeleteMessage:u})}),(0,r.jsx)(d,{onSendMessage:l,isConnected:x})]})}function x(e){let{building:t}=e,[s,n]=(0,a.useState)(!0);return s?(0,r.jsxs)("div",{className:"absolute top-24 right-4 bg-white/95 p-4 rounded shadow-lg max-w-sm z-10",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)("h3",{className:"font-bold text-sm text-gray-900",children:"Building Details"}),(0,r.jsx)("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 text-xs",children:"✕"})]}),(0,r.jsxs)("dl",{className:"space-y-1 text-xs",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-gray-500 inline",children:"Owner:"}),(0,r.jsx)("dd",{className:"text-gray-900 inline ml-1",children:t.owner})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-gray-500 inline",children:"Units:"}),(0,r.jsx)("dd",{className:"text-gray-900 inline ml-1",children:t.units.toLocaleString()})]}),t.yearBuilt&&(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-gray-500 inline",children:"Built:"}),(0,r.jsx)("dd",{className:"text-gray-900 inline ml-1",children:t.yearBuilt})]}),t.sqft&&(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-gray-500 inline",children:"Size:"}),(0,r.jsxs)("dd",{className:"text-gray-900 inline ml-1",children:[t.sqft.toLocaleString()," sq ft"]})]}),t.value&&(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-gray-500 inline",children:"Assessed Value:"}),(0,r.jsxs)("dd",{className:"text-gray-900 inline ml-1",children:["$",t.value.toLocaleString()]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-gray-500 inline",children:"APN:"}),(0,r.jsx)("dd",{className:"text-gray-900 inline ml-1 font-mono text-[10px]",children:t.apn})]})]})]}):(0,r.jsx)("button",{onClick:()=>n(!0),className:"absolute top-24 right-4 bg-white/90 px-3 py-2 rounded shadow-lg text-xs text-gray-600 hover:bg-white transition",children:"Show building info"})}function m(){let e=[{apn:"1221136",address:"2500 E 2ND ST, RENO, NV 89502",owner:"GAGE VILLAGE COMMERCIAL DEV LLC et al",units:1495,value:36827351,yearBuilt:1978,sqft:1048514,chatSlug:"rstu-2500-e-2nd-st"},{apn:"726128",address:"500 WEST ST, RENO, NV 89501",owner:"CCR NEWCO LLC",units:906,value:10209015,yearBuilt:1983,sqft:613385,chatSlug:"rstu-500-west-st"},{apn:"726129",address:"130 W 6TH ST, RENO, NV 89501",owner:"UCCELLI LIVING TRUST et al",units:905,value:1592806,yearBuilt:1985,sqft:80566,chatSlug:"rstu-130-w-6th-st"},{apn:"726112",address:"190 W 6TH ST, RENO, NV 89501",owner:"CCR NEWCO LLC",units:905,value:789043,yearBuilt:1985,sqft:36621,chatSlug:"rstu-190-w-6th-st"},{apn:"754215",address:"345 N ARLINGTON AVE, RENO, NV 89501",owner:"JESR LLC",units:779,value:10862110,yearBuilt:1992,sqft:573331,chatSlug:"rstu-345-n-arlington-ave"},{apn:"726226",address:"500 N SIERRA ST, RENO, NV 89501",owner:"CCR NEWCO LLC",units:673,value:15560272,yearBuilt:1969,sqft:587380,chatSlug:"rstu-500-n-sierra-st"},{apn:"8638040",address:"7711 SKY VISTA PKWY, RENO, NV",owner:"LAKES AT LEMMON VALLEY LLC",units:489,value:21963348,yearBuilt:2020,sqft:371855,chatSlug:"rstu-7711-sky-vista-pkwy"},{apn:"14021217",address:"1160 DAMONTE RANCH PKWY, RENO, NV",owner:"KIW RENO VENTURE LLC",units:483,value:27317617,yearBuilt:2023,sqft:476624,chatSlug:"rstu-1160-damonte-ranch-pkwy"},{apn:"2128106",address:"4500 MIRA LOMA DR, RENO, NV",owner:"ROSEWOOD PARK SPE LLC",units:450,value:8633681,yearBuilt:1979,sqft:381852,chatSlug:"rstu-4500-mira-loma-dr"},{apn:"16309026",address:"9200 DOUBLE R BLVD, RENO, NV",owner:"OAKMONT PROPERTIES DOUBLE R LLC",units:441,value:25526215,yearBuilt:2020,sqft:451635,chatSlug:"rstu-9200-double-r-blvd"},{apn:"2128107",address:"4650 SIERRA MADRE DR, RENO, NV",owner:"ROSEWOOD PARK SPE LLC et al",units:428,value:7877324,yearBuilt:1979,sqft:344784,chatSlug:"rstu-4650-sierra-madre-dr"},{apn:"3917036",address:"5200 SUMMIT RIDGE DR, RENO, NV",owner:"TOMANEK GROUP LLC",units:419,value:19337992,yearBuilt:1997,sqft:477926,chatSlug:"rstu-5200-summit-ridge-dr"},{apn:"16401004",address:"8455 OFFENHAUSER DR, RENO, NV",owner:"RIVIERA TERRACE INVESTORS LTD",units:408,value:14776407,yearBuilt:1998,sqft:342019,chatSlug:"rstu-8455-offenhauser-dr"},{apn:"16320003",address:"1001 SOUTH MEADOWS PKWY, RENO, NV",owner:"SEQUOIA EQUITIES TRINITY HOUSE et al",units:388,value:14616695,yearBuilt:1999,sqft:365634,chatSlug:"rstu-1001-south-meadows-pkwy"},{apn:"1154411",address:"255 N SIERRA ST 140, RENO, NV",owner:"TFI HOLDINGS LLC",units:377,value:524633,yearBuilt:1978,sqft:5735,chatSlug:"rstu-255-n-sierra-st-140"}],[t,s]=(0,a.useState)(e[0]);return(0,r.jsxs)("div",{className:"flex h-screen",style:{height:"calc(100vh - 140px)"},children:[(0,r.jsx)(l,{buildings:e,selectedBuilding:t,onSelectBuilding:s}),(0,r.jsxs)("div",{className:"w-3/5 flex flex-col bg-white relative",children:[(0,r.jsx)(u,{chatSlug:t.chatSlug,buildingAddress:t.address}),(0,r.jsx)(x,{building:t})]})]})}}},function(e){e.O(0,[40,971,23,744],function(){return e(e.s=8010)}),_N_E=e.O()}]);